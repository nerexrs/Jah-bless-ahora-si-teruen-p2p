<span id="forkongithub">
  <a href="https://github.com/pubkey/rxdb-quickstart" target="_blank">Fork me on GitHub</a>
</span>

<section class="todoapp">
  <header class="header">
    <h1>p2p todos</h1>
    <p class="description">
      This is a <a href="https://rxdb.info/offline-first.html" target="_blank">local first</a> todo app that stores data locally with <a href="https://rxdb.info/" target="_blank">RxDB</a> and
      replicates it <a href="https://rxdb.info/replication-p2p.html" target="_blank">peer-to-peer with WebRTC</a> to other devices without sending
      the data through any central server.

      Open this url in another browser/device/tab to test the replication: <br />
      <code id="copy-url">{{ copyUrl }}</code>
      <br />
      The whole app is implemented without a framework in about 200 lines of TypeScript code.
      To learn more about how it works, I recommend looking at the <a href="https://github.com/pubkey/rxdb-quickstart/blob/master/src/index.ts" target="_blank">source code</a> and read the <a href="https://rxdb.info/quickstart.html" target="_blank">RxDB Quickstart Guide</a>.
    </p>
    <hr>
    <input
      #newTodoInput
      id="insert-todo"
      class="new-todo"
      placeholder="What needs to be done? (Enter to submit)"
      [(ngModel)]="newTodo"
      (keydown.enter)="addTodo()"
      (blur)="addTodo()"
      autofocus
    >
  </header>
  <section class="main">
    <input
      id="toggle-all"
      class="toggle-all"
      type="checkbox"
      [checked]="allCompleted"
      (change)="toggleAll()"
    >
    <label for="toggle-all">Mark all as complete</label>
    <ul class="todo-list" id="todo-list">
      <li *ngFor="let todo of todos" [class.completed]="todo.state === 'done'">
        <div class="view">
          <input
            class="toggle"
            type="checkbox"
            [checked]="todo.state === 'done'"
            (change)="toggleTodo(todo)"
          >
          <label
            [contentEditable]="true"
            (blur)="updateTodoName(todo, $event)"
            (keydown.enter)="updateTodoName(todo, $event)"
            [innerHTML]="escapeForHTML(todo.name)"
          ></label>
          <button class="destroy" (click)="deleteTodo(todo)"></button>
        </div>
      </li>
    </ul>
    <footer class="footer" *ngIf="todos.length > 0">
      <span class="todo-count">{{ remainingCount }} item{{ remainingCount !== 1 ? 's' : '' }} left</span>
      <ul class="filters">
        <!-- <li>
          <a class="selected">All</a>
        </li> -->
        <!-- <li>
          <a>Completed</a>
        </li> -->
      </ul>
      <button
        class="clear-completed"
        id="clear-completed"
        (click)="clearCompleted()"
        *ngIf="completedCount > 0"
      >
        Clear completed
      </button>
    </footer>
  </section>
</section>
<footer class="info">
  <!-- <p>Double-click to edit a todo</p> -->
  <p>Written by <a href="https://github.com/pubkey" target="_blank">Daniel</a></p>
  <p><a href="https://rxdb.info">Powered by RxDB</a></p>
</footer>
