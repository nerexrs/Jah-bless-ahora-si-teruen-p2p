{"version":3,"file":"appwrite-helpers.js","names":["flatClone","appwriteDocToRxDB","appwriteDoc","primaryKey","deletedField","useDoc","Object","keys","forEach","key","startsWith","$id","_deleted","rxdbDocToAppwrite","rxdbDoc","writeDoc","_attachments"],"sources":["../../../../src/plugins/replication-appwrite/appwrite-helpers.ts"],"sourcesContent":["import type { RxDocumentData, WithDeleted, WithDeletedAndAttachments } from '../../types';\nimport { flatClone } from '../utils/index.ts';\n\nexport function appwriteDocToRxDB<RxDocType>(\n    appwriteDoc: any,\n    primaryKey: string,\n    deletedField: string\n\n): WithDeleted<RxDocType> {\n    const useDoc: any = {};\n    Object.keys(appwriteDoc).forEach(key => {\n        if (!key.startsWith('$')) {\n            useDoc[key] = appwriteDoc[key];\n        }\n    });\n    useDoc[primaryKey] = appwriteDoc.$id;\n    useDoc._deleted = appwriteDoc[deletedField];\n    if (deletedField !== '_deleted') {\n        delete useDoc[deletedField];\n    }\n    return useDoc;\n}\n\n\nexport function rxdbDocToAppwrite<RxDocType>(\n    rxdbDoc: WithDeletedAndAttachments<RxDocType>,\n    primaryKey: string,\n    deletedField: string\n) {\n    const writeDoc: any = flatClone(rxdbDoc);\n    delete (writeDoc as WithDeletedAndAttachments<RxDocType>)._attachments;\n    delete writeDoc[primaryKey];\n    writeDoc[deletedField] = writeDoc._deleted;\n    if (deletedField !== '_deleted') {\n        delete writeDoc._deleted;\n    }\n    return writeDoc;\n}\n"],"mappings":"AACA,SAASA,SAAS,QAAQ,mBAAmB;AAE7C,OAAO,SAASC,iBAAiBA,CAC7BC,WAAgB,EAChBC,UAAkB,EAClBC,YAAoB,EAEE;EACtB,IAAMC,MAAW,GAAG,CAAC,CAAC;EACtBC,MAAM,CAACC,IAAI,CAACL,WAAW,CAAC,CAACM,OAAO,CAACC,GAAG,IAAI;IACpC,IAAI,CAACA,GAAG,CAACC,UAAU,CAAC,GAAG,CAAC,EAAE;MACtBL,MAAM,CAACI,GAAG,CAAC,GAAGP,WAAW,CAACO,GAAG,CAAC;IAClC;EACJ,CAAC,CAAC;EACFJ,MAAM,CAACF,UAAU,CAAC,GAAGD,WAAW,CAACS,GAAG;EACpCN,MAAM,CAACO,QAAQ,GAAGV,WAAW,CAACE,YAAY,CAAC;EAC3C,IAAIA,YAAY,KAAK,UAAU,EAAE;IAC7B,OAAOC,MAAM,CAACD,YAAY,CAAC;EAC/B;EACA,OAAOC,MAAM;AACjB;AAGA,OAAO,SAASQ,iBAAiBA,CAC7BC,OAA6C,EAC7CX,UAAkB,EAClBC,YAAoB,EACtB;EACE,IAAMW,QAAa,GAAGf,SAAS,CAACc,OAAO,CAAC;EACxC,OAAQC,QAAQ,CAA0CC,YAAY;EACtE,OAAOD,QAAQ,CAACZ,UAAU,CAAC;EAC3BY,QAAQ,CAACX,YAAY,CAAC,GAAGW,QAAQ,CAACH,QAAQ;EAC1C,IAAIR,YAAY,KAAK,UAAU,EAAE;IAC7B,OAAOW,QAAQ,CAACH,QAAQ;EAC5B;EACA,OAAOG,QAAQ;AACnB","ignoreList":[]}