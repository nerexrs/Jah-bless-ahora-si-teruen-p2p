{"version":3,"file":"localstorage-mock.js","names":["storageEventStream$","storage","getLocalStorageMock","setItem","key","value","next","fromStorageEvent","newValue","getItem","removeItem","length","Object","keys","i"],"sources":["../../../../src/plugins/storage-localstorage/localstorage-mock.ts"],"sourcesContent":["import { storageEventStream$ } from './rx-storage-instance-localstorage.ts';\n\n/**\n * This mocks the localstorage API\n * so we can run tests in node.js\n */\nlet storage: any = {};\nexport function getLocalStorageMock(): typeof localStorage {\n    return {\n        setItem: function (key: string, value: string) {\n            storage[key] = value || '';\n            storageEventStream$.next({\n                fromStorageEvent: true,\n                key,\n                newValue: value\n            });\n        },\n        getItem: function (key: string) {\n            return key in storage ? storage[key] : null;\n        },\n        removeItem: function (key: string) {\n            delete storage[key];\n        },\n        get length() {\n            return Object.keys(storage).length;\n        },\n        key: function (i: number) {\n            const keys = Object.keys(storage);\n            return keys[i] || null;\n        }\n    } as any;\n}\n"],"mappings":"AAAA,SAASA,mBAAmB,QAAQ,uCAAuC;;AAE3E;AACA;AACA;AACA;AACA,IAAIC,OAAY,GAAG,CAAC,CAAC;AACrB,OAAO,SAASC,mBAAmBA,CAAA,EAAwB;EACvD,OAAO;IACHC,OAAO,EAAE,SAAAA,CAAUC,GAAW,EAAEC,KAAa,EAAE;MAC3CJ,OAAO,CAACG,GAAG,CAAC,GAAGC,KAAK,IAAI,EAAE;MAC1BL,mBAAmB,CAACM,IAAI,CAAC;QACrBC,gBAAgB,EAAE,IAAI;QACtBH,GAAG;QACHI,QAAQ,EAAEH;MACd,CAAC,CAAC;IACN,CAAC;IACDI,OAAO,EAAE,SAAAA,CAAUL,GAAW,EAAE;MAC5B,OAAOA,GAAG,IAAIH,OAAO,GAAGA,OAAO,CAACG,GAAG,CAAC,GAAG,IAAI;IAC/C,CAAC;IACDM,UAAU,EAAE,SAAAA,CAAUN,GAAW,EAAE;MAC/B,OAAOH,OAAO,CAACG,GAAG,CAAC;IACvB,CAAC;IACD,IAAIO,MAAMA,CAAA,EAAG;MACT,OAAOC,MAAM,CAACC,IAAI,CAACZ,OAAO,CAAC,CAACU,MAAM;IACtC,CAAC;IACDP,GAAG,EAAE,SAAAA,CAAUU,CAAS,EAAE;MACtB,IAAMD,IAAI,GAAGD,MAAM,CAACC,IAAI,CAACZ,OAAO,CAAC;MACjC,OAAOY,IAAI,CAACC,CAAC,CAAC,IAAI,IAAI;IAC1B;EACJ,CAAC;AACL","ignoreList":[]}