function He(r){return Object.freeze(r),Object.getOwnPropertyNames(r).forEach(function(e){Object.prototype.hasOwnProperty.call(r,e)&&r[e]!==null&&(typeof r[e]=="object"||typeof r[e]=="function")&&!Object.isFrozen(r[e])&&He(r[e])}),r}function oo(r){var e=r.split("."),t=e.length;return t===1?o=>o[r]:o=>{for(var n=o,i=0;i<t;++i){var f=e[i];if(n=n[f],typeof n>"u")return n}return n}}function Xe(r){var e={};for(var t in r)if(Object.prototype.hasOwnProperty.call(r,t))if(typeof r[t]=="object"){var o=Xe(r[t]);for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[t+"."+n]=o[n])}else e[t]=r[t];return e}function Mr(r){return Object.assign({},r)}function no(r){return Object.keys(r)[0]}function rr(r,e=!1){if(!r)return r;if(!e&&Array.isArray(r))return r.sort((o,n)=>typeof o=="string"&&typeof n=="string"?o.localeCompare(n):typeof o=="object"?1:-1).map(o=>rr(o,e));if(typeof r=="object"&&!Array.isArray(r)){var t={};return Object.keys(r).sort((o,n)=>o.localeCompare(n)).forEach(o=>{t[o]=rr(r[o],e)}),t}return r}function Fr(r){if(!r||r===null||typeof r!="object")return r;if(Array.isArray(r)){for(var e=new Array(r.length),t=e.length;t--;)e[t]=Fr(r[t]);return e}var o={};for(var n in r)o[n]=Fr(r[n]);return o}var io=Fr;function fo(r,e,t){return Object.defineProperty(r,e,{get:function(){return t}}),t}function $e(r,e=""){if(typeof r!="object"||r===null)return!1;for(var t of Object.keys(r)){var o=r[t],n=e?e+"."+t:t;if(typeof o>"u")return n;if(typeof o=="object"&&o!==null){var i=$e(o,n);if(i)return i}}return!1}function k(r){"@babel/helpers - typeof";return k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(r)}function fe(r,e){if(k(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var o=t.call(r,e||"default");if(k(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function se(r){var e=fe(r,"string");return k(e)=="symbol"?e:e+""}function ue(r,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(r,se(o.key),o)}}function kr(r,e,t){return e&&ue(r.prototype,e),t&&ue(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function C(r,e){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,o){return t.__proto__=o,t},C(r,e)}function Lr(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,C(r,e)}function er(r){return er=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},er(r)}function pe(r){try{return Function.toString.call(r).indexOf("[native code]")!==-1}catch{return typeof r=="function"}}function Wr(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Wr=function(){return!!r})()}function ae(r,e,t){if(Wr())return Reflect.construct.apply(null,arguments);var o=[null];o.push.apply(o,e);var n=new(r.bind.apply(r,o));return t&&C(n,t.prototype),n}function H(r){var e=typeof Map=="function"?new Map:void 0;return H=function(o){if(o===null||!pe(o))return o;if(typeof o!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(o))return e.get(o);e.set(o,n)}function n(){return ae(o,arguments,er(this).constructor)}return n.prototype=Object.create(o.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),C(n,o)},H(r)}var Nr={isDevMode(){return!1},deepFreezeWhenDevMode(r){return r},tunnelErrorMessage(r){return`
        RxDB Error-Code: `+r+`.
        Hint: Error messages are not included in RxDB core to reduce build size.
        To show the full error messages and to ensure that you do not make any mistakes when using RxDB,
        use the dev-mode plugin when you are in development mode: https://rxdb.info/dev-mode.html?console=error
        `}};function Je(r){var e="";return Object.keys(r).length===0||(e+="-".repeat(20)+`
`,e+=`Parameters:
`,e+=Object.keys(r).map(t=>{var o="[object Object]";try{t==="errors"?o=r[t].map(n=>JSON.stringify(n,Object.getOwnPropertyNames(n))):o=JSON.stringify(r[t],function(n,i){return i===void 0?null:i},2)}catch{}return t+": "+o}).join(`
`),e+=`
`),e}function le(r,e,t){return`
`+r+`
`+Je(t)}var Ze=function(r){function e(o,n,i={}){var f,s=le(n,o,i);return f=r.call(this,s)||this,f.code=o,f.message=s,f.url=Ur(o),f.parameters=i,f.rxdb=!0,f}Lr(e,r);var t=e.prototype;return t.toString=function(){return this.message},kr(e,[{key:"name",get:function(){return"RxError ("+this.code+")"}},{key:"typeError",get:function(){return!1}}])}(H(Error)),Qe=function(r){function e(o,n,i={}){var f,s=le(n,o,i);return f=r.call(this,s)||this,f.code=o,f.message=s,f.url=Ur(o),f.parameters=i,f.rxdb=!0,f}Lr(e,r);var t=e.prototype;return t.toString=function(){return this.message},kr(e,[{key:"name",get:function(){return"RxTypeError ("+this.code+")"}},{key:"typeError",get:function(){return!0}}])}(H(TypeError));function Ur(r){return"https://rxdb.info/errors.html?console=errors#"+r}function ce(r){return`
Find out more about this error here: `+Ur(r)+` 
`}function tr(r,e){return new Ze(r,Nr.tunnelErrorMessage(r)+ce(r),e)}function Wo(r,e){return new Qe(r,Nr.tunnelErrorMessage(r)+ce(r),e)}function No(r){return r&&r.status===409?r:!1}var rt={409:"document write conflict",422:"schema validation error",510:"attachment data missing"};function Uo(r){return tr("COL20",{name:rt[r.status],document:r.documentId,writeError:r})}function p(r){return typeof r=="function"}function q(r){let t=r(o=>{Error.call(o),o.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var or=q(r=>function(t){r(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((o,n)=>`${n+1}) ${o.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function L(r,e){if(r){let t=r.indexOf(e);0<=t&&r.splice(t,1)}}var v=class r{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let i of t)i.remove(this);else t.remove(this);let{initialTeardown:o}=this;if(p(o))try{o()}catch(i){e=i instanceof or?i.errors:[i]}let{_finalizers:n}=this;if(n){this._finalizers=null;for(let i of n)try{me(i)}catch(f){e=e??[],f instanceof or?e=[...e,...f.errors]:e.push(f)}}if(e)throw new or(e)}}add(e){var t;if(e&&e!==this)if(this.closed)me(e);else{if(e instanceof r){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&L(t,e)}remove(e){let{_finalizers:t}=this;t&&L(t,e),e instanceof r&&e._removeParent(this)}};v.EMPTY=(()=>{let r=new v;return r.closed=!0,r})();var Dr=v.EMPTY;function nr(r){return r instanceof v||r&&"closed"in r&&p(r.remove)&&p(r.add)&&p(r.unsubscribe)}function me(r){p(r)?r():r.unsubscribe()}var A={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var z={setTimeout(r,e,...t){let{delegate:o}=z;return o?.setTimeout?o.setTimeout(r,e,...t):setTimeout(r,e,...t)},clearTimeout(r){let{delegate:e}=z;return(e?.clearTimeout||clearTimeout)(r)},delegate:void 0};function ir(r){z.setTimeout(()=>{let{onUnhandledError:e}=A;if(e)e(r);else throw r})}function X(){}var de=jr("C",void 0,void 0);function he(r){return jr("E",void 0,r)}function xe(r){return jr("N",r,void 0)}function jr(r,e,t){return{kind:r,value:e,error:t}}var W=null;function V(r){if(A.useDeprecatedSynchronousErrorHandling){let e=!W;if(e&&(W={errorThrown:!1,error:null}),r(),e){let{errorThrown:t,error:o}=W;if(W=null,t)throw o}}else r()}function ye(r){A.useDeprecatedSynchronousErrorHandling&&W&&(W.errorThrown=!0,W.error=r)}var N=class extends v{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,nr(e)&&e.add(this)):this.destination=ot}static create(e,t,o){return new I(e,t,o)}next(e){this.isStopped?zr(xe(e),this):this._next(e)}error(e){this.isStopped?zr(he(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?zr(de,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},et=Function.prototype.bind;function qr(r,e){return et.call(r,e)}var Vr=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(o){fr(o)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(o){fr(o)}else fr(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){fr(t)}}},I=class extends N{constructor(e,t,o){super();let n;if(p(e)||!e)n={next:e??void 0,error:t??void 0,complete:o??void 0};else{let i;this&&A.useDeprecatedNextContext?(i=Object.create(e),i.unsubscribe=()=>this.unsubscribe(),n={next:e.next&&qr(e.next,i),error:e.error&&qr(e.error,i),complete:e.complete&&qr(e.complete,i)}):n=e}this.destination=new Vr(n)}};function fr(r){A.useDeprecatedSynchronousErrorHandling?ye(r):ir(r)}function tt(r){throw r}function zr(r,e){let{onStoppedNotification:t}=A;t&&z.setTimeout(()=>t(r,e))}var ot={closed:!0,next:X,error:tt,complete:X};var K=typeof Symbol=="function"&&Symbol.observable||"@@observable";function w(r){return r}function nt(...r){return Kr(r)}function Kr(r){return r.length===0?w:r.length===1?r[0]:function(t){return r.reduce((o,n)=>n(o),t)}}var m=(()=>{class r{constructor(t){t&&(this._subscribe=t)}lift(t){let o=new r;return o.source=this,o.operator=t,o}subscribe(t,o,n){let i=ft(t)?t:new I(t,o,n);return V(()=>{let{operator:f,source:s}=this;i.add(f?f.call(i,s):s?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(t){try{return this._subscribe(t)}catch(o){t.error(o)}}forEach(t,o){return o=be(o),new o((n,i)=>{let f=new I({next:s=>{try{t(s)}catch(u){i(u),f.unsubscribe()}},error:i,complete:n});this.subscribe(f)})}_subscribe(t){var o;return(o=this.source)===null||o===void 0?void 0:o.subscribe(t)}[K](){return this}pipe(...t){return Kr(t)(this)}toPromise(t){return t=be(t),new t((o,n)=>{let i;this.subscribe(f=>i=f,f=>n(f),()=>o(i))})}}return r.create=e=>new r(e),r})();function be(r){var e;return(e=r??A.Promise)!==null&&e!==void 0?e:Promise}function it(r){return r&&p(r.next)&&p(r.error)&&p(r.complete)}function ft(r){return r&&r instanceof N||it(r)&&nr(r)}var ve=q(r=>function(){r(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var R=(()=>{class r extends m{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let o=new sr(this,this);return o.operator=t,o}_throwIfClosed(){if(this.closed)throw new ve}next(t){V(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let o of this.currentObservers)o.next(t)}})}error(t){V(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:o}=this;for(;o.length;)o.shift().error(t)}})}complete(){V(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:o,isStopped:n,observers:i}=this;return o||n?Dr:(this.currentObservers=null,i.push(t),new v(()=>{this.currentObservers=null,L(i,t)}))}_checkFinalizedStatuses(t){let{hasError:o,thrownError:n,isStopped:i}=this;o?t.error(n):i&&t.complete()}asObservable(){let t=new m;return t.source=this,t}}return r.create=(e,t)=>new sr(e,t),r})(),sr=class extends R{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,o;(o=(t=this.destination)===null||t===void 0?void 0:t.next)===null||o===void 0||o.call(t,e)}error(e){var t,o;(o=(t=this.destination)===null||t===void 0?void 0:t.error)===null||o===void 0||o.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,o;return(o=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&o!==void 0?o:Dr}};var Br=class extends R{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:o}=this;if(e)throw t;return this._throwIfClosed(),o}next(e){super.next(this._value=e)}};var T=q(r=>function(){r(this),this.name="EmptyError",this.message="no elements in sequence"});function st(r,e){let t=typeof e=="object";return new Promise((o,n)=>{let i=new I({next:f=>{o(f),i.unsubscribe()},error:n,complete:()=>{t?o(e.defaultValue):n(new T)}});r.subscribe(i)})}function Gr(r){return p(r?.lift)}function a(r){return e=>{if(Gr(e))return e.lift(function(t){try{return r(t,this)}catch(o){this.error(o)}});throw new TypeError("Unable to lift unknown Observable type")}}function c(r,e,t,o,n){return new Yr(r,e,t,o,n)}var Yr=class extends N{constructor(e,t,o,n,i,f){super(e),this.onFinalize=i,this.shouldUnsubscribe=f,this._next=t?function(s){try{t(s)}catch(u){e.error(u)}}:super._next,this._error=n?function(s){try{n(s)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=o?function(){try{o()}catch(s){e.error(s)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function B(r,e){return a((t,o)=>{let n=0;t.subscribe(c(o,i=>{o.next(r.call(e,i,n++))}))})}function we(r,e,t,o){function n(i){return i instanceof t?i:new t(function(f){f(i)})}return new(t||(t=Promise))(function(i,f){function s(d){try{l(o.next(d))}catch(x){f(x)}}function u(d){try{l(o.throw(d))}catch(x){f(x)}}function l(d){d.done?i(d.value):n(d.value).then(s,u)}l((o=o.apply(r,e||[])).next())})}function _e(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],o=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&o>=r.length&&(r=void 0),{value:r&&r[o++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function U(r){return this instanceof U?(this.v=r,this):new U(r)}function ge(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=t.apply(r,e||[]),n,i=[];return n=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",f),n[Symbol.asyncIterator]=function(){return this},n;function f(h){return function(g){return Promise.resolve(g).then(h,x)}}function s(h,g){o[h]&&(n[h]=function(b){return new Promise(function(M,_){i.push([h,b,M,_])>1||u(h,b)})},g&&(n[h]=g(n[h])))}function u(h,g){try{l(o[h](g))}catch(b){S(i[0][3],b)}}function l(h){h.value instanceof U?Promise.resolve(h.value.v).then(d,x):S(i[0][2],h)}function d(h){u("next",h)}function x(h){u("throw",h)}function S(h,g){h(g),i.shift(),i.length&&u(i[0][0],i[0][1])}}function Ee(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof _e=="function"?_e(r):r[Symbol.iterator](),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(i){t[i]=r[i]&&function(f){return new Promise(function(s,u){f=r[i](f),n(s,u,f.done,f.value)})}}function n(i,f,s,u){Promise.resolve(u).then(function(l){i({value:l,done:s})},f)}}var ur=r=>r&&typeof r.length=="number"&&typeof r!="function";function pr(r){return p(r?.then)}function ar(r){return p(r[K])}function lr(r){return Symbol.asyncIterator&&p(r?.[Symbol.asyncIterator])}function cr(r){return new TypeError(`You provided ${r!==null&&typeof r=="object"?"an invalid object":`'${r}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function ut(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var mr=ut();function dr(r){return p(r?.[mr])}function hr(r){return ge(this,arguments,function*(){let t=r.getReader();try{for(;;){let{value:o,done:n}=yield U(t.read());if(n)return yield U(void 0);yield yield U(o)}}finally{t.releaseLock()}})}function xr(r){return p(r?.getReader)}function y(r){if(r instanceof m)return r;if(r!=null){if(ar(r))return pt(r);if(ur(r))return at(r);if(pr(r))return lt(r);if(lr(r))return Se(r);if(dr(r))return ct(r);if(xr(r))return mt(r)}throw cr(r)}function pt(r){return new m(e=>{let t=r[K]();if(p(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function at(r){return new m(e=>{for(let t=0;t<r.length&&!e.closed;t++)e.next(r[t]);e.complete()})}function lt(r){return new m(e=>{r.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ir)})}function ct(r){return new m(e=>{for(let t of r)if(e.next(t),e.closed)return;e.complete()})}function Se(r){return new m(e=>{dt(r,e).catch(t=>e.error(t))})}function mt(r){return Se(hr(r))}function dt(r,e){var t,o,n,i;return we(this,void 0,void 0,function*(){try{for(t=Ee(r);o=yield t.next(),!o.done;){let f=o.value;if(e.next(f),e.closed)return}}catch(f){n={error:f}}finally{try{o&&!o.done&&(i=t.return)&&(yield i.call(t))}finally{if(n)throw n.error}}e.complete()})}function E(r,e,t,o=0,n=!1){let i=e.schedule(function(){t(),n?r.add(this.schedule(null,o)):this.unsubscribe()},o);if(r.add(i),!n)return i}function Oe(r,e,t,o,n,i,f,s){let u=[],l=0,d=0,x=!1,S=()=>{x&&!u.length&&!l&&e.complete()},h=b=>l<o?g(b):u.push(b),g=b=>{i&&e.next(b),l++;let M=!1;y(t(b,d++)).subscribe(c(e,_=>{n?.(_),i?h(_):e.next(_)},()=>{M=!0},void 0,()=>{if(M)try{for(l--;u.length&&l<o;){let _=u.shift();f?E(e,f,()=>g(_)):g(_)}S()}catch(_){e.error(_)}}))};return r.subscribe(c(e,h,()=>{x=!0,S()})),()=>{s?.()}}function F(r,e,t=1/0){return p(e)?F((o,n)=>B((i,f)=>e(o,i,n,f))(y(r(o,n))),t):(typeof e=="number"&&(t=e),a((o,n)=>Oe(o,n,r,t)))}function G(r,e){return a((t,o)=>{let n=0;t.subscribe(c(o,i=>r.call(e,i,n++)&&o.next(i)))})}function ht(r,e,t){let o=p(r)||e||t?{next:r,error:e,complete:t}:r;return o?a((n,i)=>{var f;(f=o.subscribe)===null||f===void 0||f.call(o);let s=!0;n.subscribe(c(i,u=>{var l;(l=o.next)===null||l===void 0||l.call(o,u),i.next(u)},()=>{var u;s=!1,(u=o.complete)===null||u===void 0||u.call(o),i.complete()},u=>{var l;s=!1,(l=o.error)===null||l===void 0||l.call(o,u),i.error(u)},()=>{var u,l;s&&((u=o.unsubscribe)===null||u===void 0||u.call(o)),(l=o.finalize)===null||l===void 0||l.call(o)}))}):w}function Hr(){return a((r,e)=>{let t=null;r._refCount++;let o=c(e,void 0,void 0,void 0,()=>{if(!r||r._refCount<=0||0<--r._refCount){t=null;return}let n=r._connection,i=t;t=null,n&&(!i||n===i)&&n.unsubscribe(),e.unsubscribe()});r.subscribe(o),o.closed||(t=r.connect())})}var Xr=class extends m{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Gr(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new v;let t=this.getSubject();e.add(this.source.subscribe(c(t,void 0,()=>{this._teardown(),t.complete()},o=>{this._teardown(),t.error(o)},()=>this._teardown()))),e.closed&&(this._connection=null,e=v.EMPTY)}return e}refCount(){return Hr()(this)}};var $={now(){return($.delegate||Date).now()},delegate:void 0};var yr=class extends R{constructor(e=1/0,t=1/0,o=$){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=o,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:o,_infiniteTimeWindow:n,_timestampProvider:i,_windowTime:f}=this;t||(o.push(e),!n&&o.push(i.now()+f)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:o,_buffer:n}=this,i=n.slice();for(let f=0;f<i.length&&!e.closed;f+=o?1:2)e.next(i[f]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:o,_infiniteTimeWindow:n}=this,i=(n?1:2)*e;if(e<1/0&&i<o.length&&o.splice(0,o.length-i),!n){let f=t.now(),s=0;for(let u=1;u<o.length&&o[u]<=f;u+=2)s=u;s&&o.splice(0,s+1)}}};var br=class extends v{constructor(e,t){super()}schedule(e,t=0){return this}};var J={setInterval(r,e,...t){let{delegate:o}=J;return o?.setInterval?o.setInterval(r,e,...t):setInterval(r,e,...t)},clearInterval(r){let{delegate:e}=J;return(e?.clearInterval||clearInterval)(r)},delegate:void 0};var vr=class extends br{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var o;if(this.closed)return this;this.state=e;let n=this.id,i=this.scheduler;return n!=null&&(this.id=this.recycleAsyncId(i,n,t)),this.pending=!0,this.delay=t,this.id=(o=this.id)!==null&&o!==void 0?o:this.requestAsyncId(i,this.id,t),this}requestAsyncId(e,t,o=0){return J.setInterval(e.flush.bind(e,this),o)}recycleAsyncId(e,t,o=0){if(o!=null&&this.delay===o&&this.pending===!1)return t;t!=null&&J.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let o=this._execute(e,t);if(o)return o;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let o=!1,n;try{this.work(e)}catch(i){o=!0,n=i||new Error("Scheduled action threw falsy error")}if(o)return this.unsubscribe(),n}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:o}=t;this.work=this.state=this.scheduler=null,this.pending=!1,L(o,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Y=class r{constructor(e,t=r.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,o){return new this.schedulerActionCtor(this,e).schedule(o,t)}};Y.now=$.now;var _r=class extends Y{constructor(e,t=Y.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let o;this._active=!0;do if(o=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,o){for(;e=t.shift();)e.unsubscribe();throw o}}};var xt=new _r(vr),Pe=xt;var D=new m(r=>r.complete());function wr(r){return r&&p(r.schedule)}function $r(r){return r[r.length-1]}function gr(r){return p($r(r))?r.pop():void 0}function O(r){return wr($r(r))?r.pop():void 0}function Er(r,e){return typeof $r(r)=="number"?r.pop():e}function Sr(r,e=0){return a((t,o)=>{t.subscribe(c(o,n=>E(o,r,()=>o.next(n),e),()=>E(o,r,()=>o.complete(),e),n=>E(o,r,()=>o.error(n),e)))})}function Or(r,e=0){return a((t,o)=>{o.add(r.schedule(()=>t.subscribe(o),e))})}function Ae(r,e){return y(r).pipe(Or(e),Sr(e))}function Ie(r,e){return y(r).pipe(Or(e),Sr(e))}function Te(r,e){return new m(t=>{let o=0;return e.schedule(function(){o===r.length?t.complete():(t.next(r[o++]),t.closed||this.schedule())})})}function Ce(r,e){return new m(t=>{let o;return E(t,e,()=>{o=r[mr](),E(t,e,()=>{let n,i;try{({value:n,done:i}=o.next())}catch(f){t.error(f);return}i?t.complete():t.next(n)},0,!0)}),()=>p(o?.return)&&o.return()})}function Pr(r,e){if(!r)throw new Error("Iterable cannot be null");return new m(t=>{E(t,e,()=>{let o=r[Symbol.asyncIterator]();E(t,e,()=>{o.next().then(n=>{n.done?t.complete():t.next(n.value)})},0,!0)})})}function Re(r,e){return Pr(hr(r),e)}function Fe(r,e){if(r!=null){if(ar(r))return Ae(r,e);if(ur(r))return Te(r,e);if(pr(r))return Ie(r,e);if(lr(r))return Pr(r,e);if(dr(r))return Ce(r,e);if(xr(r))return Re(r,e)}throw cr(r)}function P(r,e){return e?Fe(r,e):y(r)}function yt(...r){let e=O(r);return P(r,e)}function bt(r,e){let t=p(r)?r:()=>r,o=n=>n.error(t());return new m(e?n=>e.schedule(o,0,n):o)}function vt(r){return!!r&&(r instanceof m||p(r.lift)&&p(r.subscribe))}function Me(r){return r instanceof Date&&!isNaN(r)}var{isArray:_t}=Array;function wt(r,e){return _t(e)?r(...e):r(e)}function Ar(r){return B(e=>wt(r,e))}var{isArray:gt}=Array,{getPrototypeOf:Et,prototype:St,keys:Ot}=Object;function Ir(r){if(r.length===1){let e=r[0];if(gt(e))return{args:e,keys:null};if(Pt(e)){let t=Ot(e);return{args:t.map(o=>e[o]),keys:t}}}return{args:r,keys:null}}function Pt(r){return r&&typeof r=="object"&&Et(r)===St}function Tr(r,e){return r.reduce((t,o,n)=>(t[o]=e[n],t),{})}function At(...r){let e=O(r),t=gr(r),{args:o,keys:n}=Ir(r);if(o.length===0)return P([],e);let i=new m(It(o,e,n?f=>Tr(n,f):w));return t?i.pipe(Ar(t)):i}function It(r,e,t=w){return o=>{ke(e,()=>{let{length:n}=r,i=new Array(n),f=n,s=n;for(let u=0;u<n;u++)ke(e,()=>{let l=P(r[u],e),d=!1;l.subscribe(c(o,x=>{i[u]=x,d||(d=!0,s--),s||o.next(t(i.slice()))},()=>{--f||o.complete()}))},o)},o)}}function ke(r,e,t){r?E(t,r,e):e()}function j(r=1/0){return F(w,r)}function Le(){return j(1)}function Cr(...r){return Le()(P(r,O(r)))}function Tt(r){return new m(e=>{y(r()).subscribe(e)})}function Ct(...r){let e=gr(r),{args:t,keys:o}=Ir(r),n=new m(i=>{let{length:f}=t;if(!f){i.complete();return}let s=new Array(f),u=f,l=f;for(let d=0;d<f;d++){let x=!1;y(t[d]).subscribe(c(i,S=>{x||(x=!0,l--),s[d]=S},()=>u--,void 0,()=>{(!u||!x)&&(l||i.next(o?Tr(o,s):s),i.complete())}))}});return e?n.pipe(Ar(e)):n}function Rt(r=0,e,t=Pe){let o=-1;return e!=null&&(wr(e)?t=e:o=e),new m(n=>{let i=Me(r)?+r-t.now():r;i<0&&(i=0);let f=0;return t.schedule(function(){n.closed||(n.next(f++),0<=o?this.schedule(void 0,o):n.complete())},i)})}function Ft(...r){let e=O(r),t=Er(r,1/0),o=r;return o.length?o.length===1?y(o[0]):j(t)(P(o,e)):D}function We(r){return a((e,t)=>{let o=null,n=!1,i;o=e.subscribe(c(t,void 0,void 0,f=>{i=y(r(f,We(r)(e))),o?(o.unsubscribe(),o=null,i.subscribe(t)):n=!0})),n&&(o.unsubscribe(),o=null,i.subscribe(t))})}function Ne(r,e,t,o,n){return(i,f)=>{let s=t,u=e,l=0;i.subscribe(c(f,d=>{let x=l++;u=s?r(u,d,x):(s=!0,d),o&&f.next(u)},n&&(()=>{s&&f.next(u),f.complete()})))}}function Mt(r,e){return p(e)?F(r,e,1):F(r,1)}function Z(r){return a((e,t)=>{let o=!1;e.subscribe(c(t,n=>{o=!0,t.next(n)},()=>{o||t.next(r),t.complete()}))})}function Jr(r){return r<=0?()=>D:a((e,t)=>{let o=0;e.subscribe(c(t,n=>{++o<=r&&(t.next(n),r<=o&&t.complete())}))})}function kt(r,e=w){return r=r??Lt,a((t,o)=>{let n,i=!0;t.subscribe(c(o,f=>{let s=e(f);(i||!r(n,s))&&(i=!1,n=s,o.next(f))}))})}function Lt(r,e){return r===e}function Rr(r=Wt){return a((e,t)=>{let o=!1;e.subscribe(c(t,n=>{o=!0,t.next(n)},()=>o?t.complete():t.error(r())))})}function Wt(){return new T}function Nt(r){return a((e,t)=>{try{e.subscribe(t)}finally{t.add(r)}})}function Ut(r,e){let t=arguments.length>=2;return o=>o.pipe(r?G((n,i)=>r(n,i,o)):w,Jr(1),t?Z(e):Rr(()=>new T))}function Zr(r){return r<=0?()=>D:a((e,t)=>{let o=[];e.subscribe(c(t,n=>{o.push(n),r<o.length&&o.shift()},()=>{for(let n of o)t.next(n);t.complete()},void 0,()=>{o=null}))})}function Dt(r,e){let t=arguments.length>=2;return o=>o.pipe(r?G((n,i)=>r(n,i,o)):w,Zr(1),t?Z(e):Rr(()=>new T))}function Ue(...r){let e=O(r),t=Er(r,1/0);return a((o,n)=>{j(t)(P([o,...r],e)).subscribe(n)})}function jt(...r){return Ue(...r)}function qt(r,e){return a(Ne(r,e,arguments.length>=2,!0))}function De(r={}){let{connector:e=()=>new R,resetOnError:t=!0,resetOnComplete:o=!0,resetOnRefCountZero:n=!0}=r;return i=>{let f,s,u,l=0,d=!1,x=!1,S=()=>{s?.unsubscribe(),s=void 0},h=()=>{S(),f=u=void 0,d=x=!1},g=()=>{let b=f;h(),b?.unsubscribe()};return a((b,M)=>{l++,!x&&!d&&S();let _=u=u??e();M.add(()=>{l--,l===0&&!x&&!d&&(s=Qr(g,n))}),_.subscribe(M),!f&&l>0&&(f=new I({next:Q=>_.next(Q),error:Q=>{x=!0,S(),s=Qr(h,t,Q),_.error(Q)},complete:()=>{d=!0,S(),s=Qr(h,o),_.complete()}}),y(b).subscribe(f))})(i)}}function Qr(r,e,...t){if(e===!0){r();return}if(e===!1)return;let o=new I({next:()=>{o.unsubscribe(),r()}});return y(e(...t)).subscribe(o)}function zt(r,e,t){let o,n=!1;return r&&typeof r=="object"?{bufferSize:o=1/0,windowTime:e=1/0,refCount:n=!1,scheduler:t}=r:o=r??1/0,De({connector:()=>new yr(o,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:n})}function Vt(...r){let e=O(r);return a((t,o)=>{(e?Cr(r,t,e):Cr(r,t)).subscribe(o)})}function Kt(r,e){return a((t,o)=>{let n=null,i=0,f=!1,s=()=>f&&!n&&o.complete();t.subscribe(c(o,u=>{n?.unsubscribe();let l=0,d=i++;y(r(u,d)).subscribe(n=c(o,x=>o.next(e?e(u,x,d,l++):x),()=>{n=null,s()}))},()=>{f=!0,s()}))})}function Bt(r){return a((e,t)=>{y(r).subscribe(c(t,()=>t.complete(),X)),!t.closed&&e.subscribe(t)})}function Ia(r){return r[r.length-1]}function Ta(r){return Array.isArray(r)?r.slice(0):[r]}function Ca(r,e){r=r.slice(0);for(var t=[];r.length;){var o=r.splice(0,e);t.push(o)}return t}function je(r){return Array.isArray(r)}function Ra(r){return r!=null}function Fa(r,e){var t=0,o=-1;for(var n of r){o=o+1;var i=e(n,o);if(i)t=t+1;else break}return t}function qe(r,e){var t=e.length;if(t!==0){var o=r.length;r.length=o+e.length;for(var n=0;n<t;++n)r[o+n]=e[n]}}function Ma(r){return r.filter(function(e,t,o){return o.indexOf(e)===t})}function Wa(){return new Promise(r=>setTimeout(r,0))}function Gt(r=0){return new Promise(e=>setTimeout(e,r))}function Na(r){return r&&typeof r.then=="function"?r:Promise.resolve(r)}var Ua=Promise.resolve(!0),Da=Promise.resolve(!1),ja=Promise.resolve(null),Yt=Promise.resolve();function Ht(r=1e4){return typeof requestIdleCallback=="function"?new Promise(e=>{requestIdleCallback(()=>e(),{timeout:r})}):Gt(0)}var re=Yt;function qa(r=void 0){return re=re.then(()=>Ht(r)),re}function za(r){typeof requestIdleCallback=="function"&&requestIdleCallback(()=>{r()})}function Va(r,e){return r.reduce((t,o)=>t.then(o),Promise.resolve(e))}var ze="abcdefghijklmnopqrstuvwxyz";function Ba(r=10){for(var e="",t=0;t<r;t++)e+=ze.charAt(Math.floor(Math.random()*ze.length));return e}function Ga(r){r+="";var e=r.charAt(0).toUpperCase();return e+r.substr(1)}function Ve(r){for(;r.charAt(0)===".";)r=r.substr(1);for(;r.slice(-1)===".";)r=r.slice(0,-1);return r}function Ya(r){return!!(r.includes("/")||r.includes("\\"))}var te=r=>{var e=typeof r;return r!==null&&(e==="object"||e==="function")},ee=new Set(["__proto__","prototype","constructor"]),Xt=new Set("0123456789");function Ke(r){var e=[],t="",o="start",n=!1;for(var i of r)switch(i){case"\\":{if(o==="index")throw new Error("Invalid character in an index");if(o==="indexEnd")throw new Error("Invalid character after an index");n&&(t+=i),o="property",n=!n;break}case".":{if(o==="index")throw new Error("Invalid character in an index");if(o==="indexEnd"){o="property";break}if(n){n=!1,t+=i;break}if(ee.has(t))return[];e.push(t),t="",o="property";break}case"[":{if(o==="index")throw new Error("Invalid character in an index");if(o==="indexEnd"){o="index";break}if(n){n=!1,t+=i;break}if(o==="property"){if(ee.has(t))return[];e.push(t),t=""}o="index";break}case"]":{if(o==="index"){e.push(Number.parseInt(t,10)),t="",o="indexEnd";break}if(o==="indexEnd")throw new Error("Invalid character after an index")}default:{if(o==="index"&&!Xt.has(i))throw new Error("Invalid character in an index");if(o==="indexEnd")throw new Error("Invalid character after an index");o==="start"&&(o="property"),n&&(n=!1,t+="\\"),t+=i}}switch(n&&(t+="\\"),o){case"property":{if(ee.has(t))return[];e.push(t);break}case"index":throw new Error("Index was not closed");case"start":{e.push("");break}}return e}function Be(r,e){if(typeof e!="number"&&Array.isArray(r)){var t=Number.parseInt(e,10);return Number.isInteger(t)&&r[t]===r[e]}return!1}function $t(r,e){if(Be(r,e))throw new Error("Cannot use string index")}function oe(r,e,t){if(Array.isArray(e)&&(e=e.join(".")),!e.includes(".")&&!e.includes("["))return r[e];if(!te(r)||typeof e!="string")return t===void 0?r:t;var o=Ke(e);if(o.length===0)return t;for(var n=0;n<o.length;n++){var i=o[n];if(Be(r,i)?r=n===o.length-1?void 0:null:r=r[i],r==null){if(n!==o.length-1)return t;break}}return r===void 0?t:r}function $a(r,e,t){if(Array.isArray(e)&&(e=e.join(".")),!te(r)||typeof e!="string")return r;for(var o=r,n=Ke(e),i=0;i<n.length;i++){var f=n[i];$t(r,f),i===n.length-1?r[f]=t:te(r[f])||(r[f]=typeof n[i+1]=="number"?[]:{}),r=r[f]}return o}function Qa(r,e){var t=r.get(e);if(typeof t>"u")throw new Error("missing value from map "+e);return t}function rl(r,e,t,o){var n=r.get(e);return typeof n>"u"?(n=t(),r.set(e,n)):o&&o(n),n}var ne=1;function tl(){return{lwt:ne}}function ol(){return""}function nl(r){return Object.assign({},r,{_meta:void 0,_deleted:void 0,_rev:void 0})}function il(r,e,t){if(e.length!==t.length)return!1;for(var o=0,n=e.length;o<n;){var i=e[o],f=t[o];if(o++,i[r]!==f[r]||i._rev!==f._rev||i._meta.lwt!==f._meta.lwt)return!1}return!0}var Ge=/\./g;function Ye(r,e){if(!r)throw e||(e=""),new Error("ensureNotFalsy() is falsy: "+e);return r}var pl={bufferSize:1,refCount:!0};function Jt(r,e){var t=e;t=t.replace(Ge,".properties."),t="properties."+t,t=Ve(t);var o=oe(r,t);return o}function dl(r,e,t){if(typeof e.primaryKey=="string")return t;var o=Zt(e,t),n=t[r];if(n&&n!==o)throw tr("DOC19",{args:{documentData:t,existingPrimary:n,newPrimary:o},schema:e});return t[r]=o,t}function ie(r){return typeof r=="string"?r:r.key}function hl(r){var e=ie(r.primaryKey),t=Jt(r,e);return Ye(t.maxLength)}function Zt(r,e){if(typeof r.primaryKey=="string")return e[r.primaryKey];var t=r.primaryKey;return t.fields.map(o=>{var n=oe(e,o);if(typeof n>"u")throw tr("DOC18",{args:{field:o,documentData:e}});return n}).join(t.separator)}function xl(r){var e=rr(r,!0);return e}function Qt(r){return["_deleted",r]}function yl(r){r=Mr(r);var e=ie(r.primaryKey);r.properties=Mr(r.properties),r.additionalProperties=!1,Object.prototype.hasOwnProperty.call(r,"keyCompression")||(r.keyCompression=!1),r.indexes=r.indexes?r.indexes.slice(0):[],r.required=r.required?r.required.slice(0):[],r.encrypted=r.encrypted?r.encrypted.slice(0):[],r.properties._rev={type:"string",minLength:1},r.properties._attachments={type:"object"},r.properties._deleted={type:"boolean"},r.properties._meta=eo,r.required=r.required?r.required.slice(0):[],r.required.push("_deleted"),r.required.push("_rev"),r.required.push("_meta"),r.required.push("_attachments");var t=to(r);qe(r.required,t),r.required=r.required.filter(i=>!i.includes(".")).filter((i,f,s)=>s.indexOf(i)===f),r.version=r.version||0;var o=r.indexes.map(i=>{var f=je(i)?i.slice(0):[i];return f.includes(e)||f.push(e),f[0]!=="_deleted"&&f.unshift("_deleted"),f});o.length===0&&o.push(Qt(e)),o.push(["_meta.lwt",e]),r.internalIndexes&&r.internalIndexes.map(i=>{o.push(i)});var n=new Set;return o.filter(i=>{var f=i.join(",");return n.has(f)?!1:(n.add(f),!0)}),r.indexes=o,r}var ro=1e15,eo={type:"object",properties:{lwt:{type:"number",minimum:ne,maximum:ro,multipleOf:.01}},additionalProperties:!0,required:["lwt"]};function to(r){var e=Object.keys(r.properties).filter(o=>r.properties[o].final),t=ie(r.primaryKey);return e.push(t),typeof r.primaryKey!="string"&&r.primaryKey.fields.forEach(o=>e.push(o)),e}function bl(r,e){for(var t=Object.keys(r.defaultValues),o=0;o<t.length;++o){var n=t[o];(!Object.prototype.hasOwnProperty.call(e,n)||typeof e[n]>"u")&&(e[n]=r.defaultValues[n])}return e}export{v as a,nt as b,Hr as c,Xr as d,R as e,Br as f,D as g,P as h,yt as i,bt as j,vt as k,T as l,st as m,B as n,At as o,F as p,j as q,Cr as r,Tt as s,Ct as t,Rt as u,Ft as v,G as w,We as x,Mt as y,Z as z,Jr as A,kt as B,Nt as C,Ut as D,Zr as E,Dt as F,jt as G,qt as H,zt as I,Vt as J,Kt as K,Bt as L,ht as M,kr as N,Ia as O,Ta as P,Ca as Q,je as R,Ra as S,Fa as T,qe as U,Ma as V,He as W,oo as X,Xe as Y,Mr as Z,no as _,rr as $,io as aa,fo as ba,$e as ca,ne as da,tl as ea,ol as fa,nl as ga,il as ha,Nr as ia,tr as ja,Wo as ka,No as la,Uo as ma,Wa as na,Gt as oa,Na as pa,Ua as qa,Da as ra,ja as sa,Yt as ta,Ht as ua,qa as va,za as wa,Va as xa,Ba as ya,Ga as za,Ve as Aa,Ya as Ba,oe as Ca,$a as Da,Qa as Ea,rl as Fa,Ye as Ga,pl as Ha,Jt as Ia,dl as Ja,ie as Ka,hl as La,Zt as Ma,xl as Na,yl as Oa,to as Pa,bl as Qa};
